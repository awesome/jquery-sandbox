(function(){(function(a){var d,c,e,h,i,f,j;c="abcdefghijklmnopqrstuvwxyz";c+=c.toUpperCase();c+="0123456789";e=function(){var b,a;b="";for(a=1;16>=a;++a)b+=c[Math.floor(c.length*Math.random())];return b};j=function(b){return a.sandbox.frame.get(0).contentWindow.postMessage(b,"*")};f=function(b){return a.sandbox.queue.push(b)};h=function(b){b=JSON.parse(b.originalEvent.data);if(b.id in a.sandbox.sandboxes)return a.sandbox.sandboxes[b.id].callback(b.data,b.error)};i=function(b){if(!a.sandbox.frame)return a.sandbox.frame=
a("<iframe />").attr("src",b).appendTo("body").css({position:"absolute",top:-9999,left:-9999,width:100,height:100}),a.sandbox.frame.bind("load",function(){var b,c,d,e,g;a(window).bind("message",h);f=j;c=a.sandbox.queue;a.sandbox.queue=[];g=[];d=0;for(e=c.length;d<e;d++)b=c[d],g.push(f(b));return g})};d=function(b){this.options=a.extend(!0,{},a.sandbox.defaults,b||{});this.id=e();this.state="init";return this};d.prototype={constructor:d,callback:function(b,a){return this.options.callback.apply(this,
[b,a])},post:function(b,a){return f(JSON.stringify({id:this.id,command:b,options:a}))},run:function(){if("init"===this.state)return i(this.options.url),this.post("run",{scripts:this.options.scripts,timeout:this.options.timeout}),this.state="running"},terminate:function(){if("running"===this.state)return this.post("terminate"),this.state="terminated",delete a.sandbox.sandboxes[this.id],a.sandbox.count--}};a.sandbox=function(b){if(!a.support.sandbox)return null;b=new d(b);a.sandbox.sandboxes[b.id]=
b;a.sandbox.count++;b.run();return b};a.sandbox.defaults={timeout:0,url:"//d3ltuim8m8ytq2.cloudfront.net/jquery-sandbox/0.0.1/sandbox.html",scripts:[],callback:function(){return!0}};a.sandbox.sandboxes={};a.sandbox.count=0;a.sandbox.frame=null;a.sandbox.queue=[];return a.support.sandbox=void 0!==typeof Worker})(window.jQuery)}).call(this);
